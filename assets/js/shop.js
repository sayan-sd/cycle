const cycles = [
    {
        cycleId: 1,
        shortName: "Urban Terrain MTB",
        name: "Urban Terrain Galaxy Pro High Performance Mountain Cycles",
        image: "cycle1.png",
        description:
            "Urban Terrain Galaxy Pro High Performance Mountain Cycles for Men with Front Suspension & Dual Disc Brake & Complete Accessories MTB Bike 27.5T Single Speed | Ideal for 15+ Years, Green",
        starRating: 4.3,
        ratingCount: 2428,
        currentPrice: 4999.0,
        originalPrice: 16999.0,
        discount: "71%",
        buyNowLink: "https://amzn.to/4bWRXwu",
    },
    {
        cycleId: 2,
        shortName: "Leader TORFIN MTB",
        name: "Leader TORFIN MTB 26T Mountain Bicycle",
        image: "cycle2.png",
        description:
            "Leader TORFIN MTB 26T Mountain Bicycle/Bike Without Gear Single Speed with Front Suspension and Dual Disc Brake for Men - Ideal for 10+ Years (Frame: 18 Inches) (26T, Grey)",
        starRating: 4.0,
        ratingCount: 2130,
        currentPrice: 5499.0,
        originalPrice: 10725.0,
        discount: "49%",
        buyNowLink: "https://amzn.to/4aDnZwd",
    },
    {
        cycleId: 3,
        shortName: "Leader Beast MTB",
        name: "Leader Beast 24T Multispeed Mountain Bike",
        image: "cycle3.png",
        description:
            "Leader Beast 24T Multispeed (7 Speed) Mountain Bike with Front Suspension & Dual Disc Brake - Black/Orange. Ideal for 12 + Years (Frame: 16 Inches) (24T)",
        starRating: 3.8,
        ratingCount: 954,
        currentPrice: 7099.0,
        originalPrice: 18999.0,
        discount: "63%",
        buyNowLink: "https://amzn.to/3KiGThk",
    },
    {
        cycleId: 4,
        shortName: "Leader Stark MTB",
        name: "Leader Stark 27.5T MTB Cycle",
        image: "cycle4.png",
        description:
            "Leader Stark 27.5T MTB Cycle/Bike with Dual Disc Brake and Front Suspension Single Speed for Men - Matt Black/Green Ideal for 15+ Years | Frame: 19 Inches",
        starRating: 3.8,
        ratingCount: 1622,
        currentPrice: 6299.0,
        originalPrice: 14999.0,
        discount: "58%",
        buyNowLink: "https://amzn.to/455cDjG",
    },
    {
        cycleId: 5,
        shortName: "Urban Terrain Maza",
        name: "Urban Terrain Maza Cycle/Bicycle City Bike",
        image: "cycle5.png",
        description:
            "Urban Terrain Maza Cycle/Bicycle City Bike 26T Single Speed Bike with Complete Accessories Cycle for Men/Boys | Ideal for 13+ Years, Blue",
        starRating: 4.1,
        ratingCount: 1813,
        currentPrice: 3999.0,
        originalPrice: 12000.0,
        discount: "67%",
        buyNowLink: "https://amzn.to/4bPWSPO",
    },
    {
        cycleId: 6,
        shortName: "Urban Terrain Denver",
        name: "Urban Terrain Denver Cycle/Bicycle City Bike",
        image: "cycle6.png",
        description:
            "Urban Terrain Denver Cycle/Bicycle City Bike 27.5T Single Speed Bike with Complete Accessories Cycle for Men/Boys UT7003S27.5 | Ideal for 15+ Years, Silver",
        starRating: 4.1,
        ratingCount: 2150,
        currentPrice: 3999.0,
        originalPrice: 14000.0,
        discount: "71%",
        buyNowLink: "https://amzn.to/4e1HrFL",
    },
    {
        cycleId: 7,
        shortName: "Hero Sprint Riot",
        name: "Hero Sprint Riot 26T MTB Geared Cycle",
        image: "cycle7.png",
        description:
            "Hero Sprint Riot 26T MTB Geared Cycle| 21 Speed Shimano Gears with Dual Disc | Front-Suspension | Multi-Speed | Matt Grey | Ideal Age 12+ Years for Men and Women | Unisex",
        starRating: 3.5,
        ratingCount: 86,
        currentPrice: 9999.0,
        originalPrice: 19999.0,
        discount: "50%",
        buyNowLink: "https://amzn.to/4dXcMcP",
    },
    {
        cycleId: 8,
        shortName: "Leader Beast",
        name: "Leader Beast 26T Premium Rigid City Bike",
        image: "cycle8.png",
        description:
            "Leader Beast 26T Premium Rigid City Bike/Cycle With Inbuilt Carrier Mountain Bicycle Without Gear Single Speed For Men - Matt Black. Ideal For 10 + Years, 18 Inches",
        starRating: 3.5,
        ratingCount: 35,
        currentPrice: 4799.0,
        originalPrice: 12999.0,
        discount: "63%",
        buyNowLink: "https://amzn.to/3wTkFPU",
    },
    {
        cycleId: 9,
        shortName: "CRADIAC - Xplorer",
        name: "CRADIAC - Xplorer 29 INCH Unisex MTB",
        image: "cycle9.png",
        description:
            "CRADIAC - Xplorer | 29 INCH Unisex MTB | Single Speed | Dual DISC Brake | Double Wall Alloy Rims GREY",
        starRating: 4.3,
        ratingCount: 832,
        currentPrice: 8389.0,
        originalPrice: 22999.0,
        discount: "64%",
        buyNowLink: "https://amzn.to/3R7nS5j",
    },
    {
        cycleId: 10,
        shortName: "Urban Terrain",
        name: "Urban Terrain UT6000A29 Steel Cycle",
        image: "cycle10.png",
        description:
            "Urban Terrain UT6000A29 Steel Cycle/Bicycle MTB (21 Speed) Gear Cycle for Men/Boys with Front Suspension & Dual Disc Brake Mountain Bike | Ideal for 15+ Years (White)",
        starRating: 4.2,
        ratingCount: 699,
        currentPrice: 14499.0,
        originalPrice: 52999.0,
        discount: "73%",
        buyNowLink: "https://amzn.to/4e0Eoh1",
    },
    {
        cycleId: 11,
        shortName: "Leader Stark",
        name: "Leader Stark 29T MTB Cycle",
        image: "cycle11.png",
        description:
            "Leader Stark 29T MTB Cycle/Bike with Dual Disc Brake and Complete Accessories",
        starRating: 4.1,
        ratingCount: 33,
        currentPrice: 6899.0,
        originalPrice: 16919.0,
        discount: "59%",
        buyNowLink: "https://amzn.to/3Vl3nVa",
    },
    {
        cycleId: 12,
        shortName: "Urban Terrain Zion",
        name: "Urban Terrain Zion Cycle/Bicycle MTB",
        image: "cycle12.png",
        description:
            "Urban Terrain Zion Cycle/Bicycle MTB 26T Single Speed Bike with Front Suspension Bicycle for Men/Boys Mountain Bike | Ideal for 13+ Years (Green)",
        starRating: 4.2,
        ratingCount: 581,
        currentPrice: 7699.0,
        originalPrice: 7699.0,
        discount: "0%",
        buyNowLink: "https://amzn.to/3X8mLG2",
    },
    {
        cycleId: 13,
        shortName: "Vaux Blaze MTB",
        name: "Vaux Blaze MTB Cycle for Men",
        image: "cycle13.png",
        description:
            "Vaux Blaze MTB Cycle for Men 26T with Front Suspension & Dual Disc Brakes, Single Speed Mountain Bicycle for Adults with Age Group 12+ Years, with Steel Frame, Alloy Rims & 26x2.40 Fat Tyres (Brown)",
        starRating: 4.3,
        ratingCount: 57,
        currentPrice: 8649.0,
        originalPrice: 12090.0,
        discount: "29%",
        buyNowLink: "https://amzn.to/4c1FW8Z",
    },
    {
        cycleId: 14,
        shortName: "Vaux Ibex",
        name: "Vaux Ibex 27.5T Cycle for Men",
        image: "cycle14.png",
        description:
            "Vaux Ibex 27.5T Cycle for Men with Double Disc Brakes & Front Suspension, MTB Bicycle for Adults with Hi-Ten Steel Frame, Double Alloy Rims & Ralson Tyres, for Age Group 15+ Years(Matte-Blue)",
        starRating: 4.1,
        ratingCount: 28,
        currentPrice: 8499.0,
        originalPrice: 15280.0,
        discount: "44%",
        buyNowLink: "https://amzn.to/3VlvDa8",
    },
    {
        cycleId: 15,
        shortName: "Mioox Fat Tyre",
        name: "Mioox Fat Tyre Folding Cycles Bicycle",
        image: "cycle15.png",
        description:
            "Mioox Fat Tyre Folding Cycles Bicycle Dual Suspension Fat Mountain Bike With 26X4 Inch Wheels And With 21 Speed Shimano Gears 26 T Fat Tyre Cycle For Unisex Adults (White.01), 18 Inches",
        starRating: 3.8,
        ratingCount: 13,
        currentPrice: 15590.0,
        originalPrice: 21999.0,
        discount: "29%",
        buyNowLink: "https://amzn.to/4bUAftl",
    },
    {
        cycleId: 16,
        shortName: "Lifelong 20T",
        name: "Lifelong 20T Cycle for Kids",
        image: "cycle16.png",
        description:
            "Lifelong 20T Cycle for Kids 5 to 8 Years - Bicycle for Girls - Single Speed Bike/Bicycle - 95% Pre-Assembled - Balance Wheels - Suitable for Young Girls - Above 3 Feet 10Inch+ Height",
        starRating: 4.0,
        ratingCount: 2455,
        currentPrice: 3799.0,
        originalPrice: 6999.0,
        discount: "46%",
        buyNowLink: "https://amzn.to/3wYE4Pp",
    },
    {
        cycleId: 17,
        shortName: "NINETY ONE",
        name: "NINETY ONE Limited Edition - Madrid 27.5T",
        image: "cycle17.png",
        description:
            "NINETY ONE Limited Edition - Madrid 27.5T 21 Speed Shimano ACERA Gears Alloy Bike with Dual Disc Brake Hybrid Bike (White and Yellow, 12+ Years, 27.5 x 2.1, 18.5 Inches Frame) for Men",
        starRating: 4.0,
        ratingCount: 185,
        currentPrice: 21950.0,
        originalPrice: 30000.0,
        discount: "27%",
        buyNowLink: "https://amzn.to/3Vk1Zly",
    },
    {
        cycleId: 18,
        shortName: "Leader TORFIN MTB",
        name: "Leader TORFIN MTB 26T Mountain Bicycle",
        image: "cycle18.png",
        description:
            "Leader TORFIN MTB 26T Mountain Bicycle/Bike Without Gear Single Speed with Front Suspension and Dual Disc Brake for Men - Ideal for 10+ Years (Frame: 18 Inches) (26T, SEA Green Black)",
        starRating: 4.0,
        ratingCount: 2130,
        currentPrice: 5499.0,
        originalPrice: 10725.0,
        discount: "49%",
        buyNowLink: "https://amzn.to/44Yyn0x",
    },
    {
        cycleId: 19,
        shortName: "RALLEY GOLD Jaguar",
        name: "RALLEY GOLD Jaguar Series 26T Full Size Bicycle",
        image: "cycle19.png",
        description:
            "RALLEY GOLD Jaguar Series 26T Full Size Bicycle with Carrier | Front Suspension | Double Wall Alloy Rims | Power Brakes (Black/Green)",
        starRating: 3.7,
        ratingCount: 12,
        currentPrice: 7399.0,
        originalPrice: 8499.0,
        discount: "13%",
        buyNowLink: "https://amzn.to/3wUMWWa",
    },
    {
        cycleId: 20,
        shortName: "Avon Buke Draco",
        name: "Avon Buke Draco 26T Bicycles",
        image: "cycle20.png",
        description:
            "Avon Buke Draco 26T Bicycles | Frame Size: 18.5 Inches | Wheel Size: 26 Inches | Short Bent Handle Bars | Rigid Fork with Caliper Break with Centre Frame Suspension for Adults (Matt Glossy Black), City Bike",
        starRating: 3.5,
        ratingCount: 48,
        currentPrice: 4895.0,
        originalPrice: 14950.0,
        discount: "67%",
        buyNowLink: "https://amzn.to/3V0rqY4",
    },
];

// ============ Load all cards - first time =============
document.addEventListener("DOMContentLoaded", () => {
    const productsContainer = document.querySelector(".products-container");
    const productsPreview = document.querySelector(".products-preview");

    cycles.forEach((cycle) => {
        // Create product elements
        const product = document.createElement("div");
        product.classList.add("product");
        product.setAttribute("data-name", `p-${cycle.cycleId}`);

        const shortDescription =
            cycle.description.length > 50
                ? cycle.description.substring(0, 50) + "..."
                : cycle.description;

        product.innerHTML = `
            <img src="../img/cycle_images/${cycle.image}" alt="">
            <h3 class="popular-name">${cycle.shortName}</h3>
            <span class="popular-description">${shortDescription}</span>
            <div class="popular-price">₹${cycle.currentPrice}</div>
            <button class="seeMore-btn button">See More <i class="ri-arrow-right-s-line"></i></button>
        `;

        productsContainer.appendChild(product);

        // Create product preview elements
        const preview = document.createElement("div");
        preview.classList.add("preview");
        preview.setAttribute("data-target", `p-${cycle.cycleId}`);

        preview.innerHTML = `
            <i class="fas fa-times"></i>
            <div class="product-image"><img src="../img/cycle_images/${cycle.image}" alt=""></div>
            <div class="product-info">
                <h4>${cycle.name}</h4>
                <p>${cycle.description}</p>
                <div class="prices">
                    <div class="current-price">₹${cycle.currentPrice}</div>
                    <div class="old-price">₹${cycle.originalPrice}</div>
                    <div class="discount">${cycle.discount}</div>
                </div>
                <div class="product-description">
                    <div class="product-rating"><span>${cycle.starRating}</span><i class="ri-star-fill"></i></div>
                    <div class="product-rating-count"><span>${cycle.ratingCount} Ratings</span></div>
                </div>
                <div class="buy-button"><button class="button buy-btn">Buy Now</button></div>
            </div>
        `;

        productsPreview.appendChild(preview);
    });

    // Product preview box functionality
    let preveiwContainer = document.querySelector(".products-preview");
    let previewBox = preveiwContainer.querySelectorAll(".preview");

    // Event listener for 'See More' buttons to display product previews
    document.querySelectorAll(".seeMore-btn").forEach((button) => {
        button.onclick = (event) => {
            let product = button.closest(".product");
            let name = product.getAttribute("data-name");

            preveiwContainer.style.display = "flex";

            previewBox.forEach((preview) => {
                let target = preview.getAttribute("data-target");
                if (name === target) {
                    preview.classList.add("active");
                }
            });

            event.stopPropagation();
        };
    });

    // Event listener to close product previews
    previewBox.forEach((close) => {
        close.querySelector(".fa-times").onclick = () => {
            close.classList.remove("active");
            preveiwContainer.style.display = "none";
        };
    });

    /*=============== SHOW MENU ===============*/
    const navMenu = document.getElementById("nav-menu");
    const navToggle = document.getElementById("nav-toggle");
    const navClose = document.getElementById("nav-close");

    // Menu Show
    if (navToggle) {
        navToggle.addEventListener("click", () => {
            navMenu.classList.add("show-menu");
        });
    }

    // Menu Hidden
    if (navClose) {
        navClose.addEventListener("click", () => {
            navMenu.classList.remove("show-menu");
        });
    }

    /*=============== REMOVE MENU MOBILE ===============*/
    const navLink = document.querySelectorAll(".nav-link");

    const linkAction = () => {
        const navMenu = document.getElementById("nav-menu");
        navMenu.classList.remove("show-menu");
    };

    navLink.forEach((n) => n.addEventListener("click", linkAction));

    /*=============== ADD BLUR HEADER ===============*/
    const scrollHeader = () => {
        const header = document.getElementById("header");

        this.scrollY >= 50
            ? header.classList.add("scroll-header")
            : header.classList.remove("scroll-header");
    };
    window.addEventListener("scroll", scrollHeader);

    // ================ FILTER BOX =============
    const toggleLabel = document.querySelector(".price-filter");
    const checkboxGroup = document.querySelector(".checkbox-group");
    const icon = toggleLabel.querySelector("i");

    toggleLabel.addEventListener("click", () => {
        checkboxGroup.classList.toggle("show");
        icon.classList.toggle("rotate-icon");
    });

    // Show Result button functionality
    const showResultButton = document.querySelector(".show-result");
    showResultButton.addEventListener("click", () => {
        // Get all checked checkboxes
        const checkedCheckboxes = document.querySelectorAll('input[name="price"]:checked');
        const prices = Array.from(checkedCheckboxes).map((checkbox) => checkbox.value);

        // If no checkboxes are checked, display all products
        if (checkedCheckboxes.length === 0) {
            const allProducts = document.querySelectorAll(".product");
            allProducts.forEach((product) => {
                product.style.display = "block";
            });
        } else {
            // Hide all products
            const allProducts = document.querySelectorAll(".product");
            allProducts.forEach((product) => {
                product.style.display = "none";
            });

            // Show products within selected price ranges
            cycles.forEach((cycle) => {
                const productElement = document.querySelector(`.product[data-name="p-${cycle.cycleId}"]`);
                const price = cycle.currentPrice;

                if (prices.includes("base1") && price >= 1 && price <= 4999) {
                    productElement.style.display = "block";
                } else if (prices.includes("base2") && price >= 5000 && price <= 9999) {
                    productElement.style.display = "block";
                } else if (prices.includes("base3") && price >= 10000 && price <= 19999) {
                    productElement.style.display = "block";
                } else if (prices.includes("base4") && price >= 20000) {
                    productElement.style.display = "block";
                }
            });
        }

        // Close filter group after showing results
        checkboxGroup.classList.remove("show");
        icon.classList.remove("rotate-icon");
    });

    // Buy Now button functionality in product preview
    const buyButtons = document.querySelectorAll(".buy-btn");

    buyButtons.forEach((button) => {
        button.addEventListener("click", () => {
            const product = button.closest(".preview");
            const cycleId = product.getAttribute("data-target").substring(2);
    
            console.log("Cycle ID:", cycleId);
    
            const cycle = cycles.find((cycle) => cycle.cycleId === cycleId);

            window.open(cycles[cycleId - 1].buyNowLink);
            
        });
    });
});


// ================= SHOW SCROLL UP =================
function scrollUp() {
    const scrollUp = document.getElementById('scroll-up');
    if (this.scrollY >= 50) scrollUp.classList.add('show-scroll');
}
window.addEventListener('scroll', scrollUp);